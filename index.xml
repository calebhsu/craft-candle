<craft>
    <parameter name="width" type="int" default="8"/>
    <parameter name="height" type="int" default="45"/>
    
    <group>
         <!-- Body -->
        <script type="text/craftml">
            function main() {
                if (params.width < 5)
                    params.width = 5;
                    
                if (params.height < 3)
                    params.height = 3;

                // parts
                return cylinder({
                    r: params.width / 2,
                    h: params.height - 1
                });
            }
        </script>
        
        <!-- Fill -->
        <script type="text/craftml">
            function main() {
                return cylinder({
                    r: (params.width / 2) - 1,
                    h: 1
                }).translate([0, 0, params.height - 1]);
            }
        </script>
        
        <!-- Round Top -->
        <script type="text/craftml">
            function main() {
                return torus({
                    ri: 1,
                    ro: (params.width / 2) - 1,
                    fni: 16
                }).translate([0, 0, params.height - 1]);
            }
        </script>
        
        <!-- Wick -->
        <script type="text/craftml">
            function main() {                 
                return cylinder({
                    r: 0.2,
                    h: params.height + 2
                });
            }
        </script>
        
        <!-- Flame Base -->
        <script type="text/craftml">
            function main() {   
                var base;

                base = sphere({r: 1});
        
                // transformations
                base = base.scale([1, 1, 1.2]);
                base = base.translate([0, 0, params.height + 2]);
        
                return base;
            }
        </script>
        
        <!-- Flame Tip -->
        <script type="text/craftml">
            function main() {
                var tip;
        
                tip = cylinder({
                    r1: 1.01,
                    r2:0,
                    h: 5.5
                });
        
                // transformations
                tip = tip.scale([1, 1, 1.2]);
                tip = tip.translate([0, 0, params.height + 2]);
        
                return tip;
            }
        </script>
    </group>
    
</craft>